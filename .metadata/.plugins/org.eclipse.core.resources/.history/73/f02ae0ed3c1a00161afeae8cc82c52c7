package core;

import java.io.IOException;
import java.net.InetSocketAddress;

import com.sun.net.httpserver.HttpServer;

public class CoreServer implements Runnable{
	HttpServer server;
	int port;
	Thread thread;
	boolean log;
	
	public CoreServer(int port) {
		this(port, false);
	}
	
	public void log(String message) {
		System.out.println(message);
	}
	
	public CoreServer(int port, boolean log) {
		this.port = port;
		this.thread = new Thread(this);
		this.log = log;
	}
	
	public void start() {
		thread.start();
	}
	
	public void stop() {
		try {
			server.stop();
			thread.join();
		} catch (InterruptedException e) {
			e.printStackTrace();
		}
	}
	
	public void run() {
		try {
			server = HttpServer.create(new InetSocketAddress(port), 0);
			log("Started server at " + port);
			server.createContext("/");
			server.start();
		} catch (IOException e) {
			e.printStackTrace();
		}
		
	}
}
